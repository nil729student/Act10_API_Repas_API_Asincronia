<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Peticions a l'API de Països</title>
  </head>
  <body>
    <h1>Peticions a l'API de Països</h1>

    <label for="country">Introdueix un país:</label>
    <input type="text" id="country" name="country" required />

    <button onclick="ferPeticioAmbPromesa()">Fer petició amb Promesa</button>
    <button onclick="ferPeticioAmbAsyncAwait()">
      Fer petició amb Async/Await
    </button>

    <div id="resposta"></div>

    <script>
      function obtenirInfoPaisPromesa(url) {
        return fetch(url).then((response) => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        });
      }

      function ferPeticioAmbPromesa() {
        const county = document.getElementById('country').value;
        const url = `https://restcountries.com/v3.1/name/${county}`;
        obtenirInfoPaisPromesa(url)
          .then((data) => {
            document.getElementById('resposta').innerHTML = JSON.stringify(data);
          })
          .catch((error) => console.error('error de petició', error));
      }


      async function obtenirInfoPaisAsyncAwait(url) {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      }

      async function ferPeticioAmbAsyncAwait() {
        const county = document.getElementById('country').value;
        const url = `https://restcountries.com/v3.1/name/${county}`;
        try {
          const data = await obtenirInfoPaisAsyncAwait(url);
          document.getElementById('resposta').innerHTML = JSON.stringify(data[0].name);
        } catch (error) {
          console.error('error de petició', error);
        }
      }
    </script>
  </body>
</html>
